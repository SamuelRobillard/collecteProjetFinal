{
    "openapi": "3.0.0",
    "info": {
      "title": "API Hotel",
      "version": "3.0.0",
      "description": "API RESTful pour la gestion des utilisateurs, des films  et l’authentification sécurisée"
    },
    "servers": [
      {
        "url": "http://localhost:3000/api/v3"
      }
    ],
    "paths": {
      "/users": {
        "get": {
          "summary": "Lister les utilisateurs",
          "tags": ["Users"],
          "security": [
            {
              "bearerAuth": []
            }
          ],
          "responses": {
            "200": {
              "description": "Liste des utilisateurs"
            }
          }
        },
        "post": {
          "summary": "Créer un nouvel utilisateur",
          "tags": ["Users"],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserCreate"
                }
              }
            }
          },
          "responses": {
            "201": {
              "description": "Utilisateur créé"
            },
            "400": {
              "description": "Erreur de requête"
            }
          }
        }
      },
  
      "/login": {
        "post": {
          "summary": "Authentifier un utilisateur",
          "tags": ["Users"],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserLogin"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Authentification réussie"
            },
            "401": {
              "description": "Échec de l'authentification"
            }
          }
        }
      },
  
   
  
      "schemas": {
        "UserCreate": {
          "type": "object",
          "properties": {
            "nom": { "type": "string", "example": "bob" },
            "username": { "type": "string", "example": "alice42" },
            "email": { "type": "string", "format": "email" },
            "password": { "type": "string", "minLength": 6, "example" : "password1!"},
            "role": { "type": "string", "example": "user" },
            "favorites": { "type": "string", "example": "64kw132ksk" }
          },
          "required": ["nom", "username", "email", "password", "role" , "favorites"]
        },
        "UserLogin": {
          "type": "object",
          "properties": {
            "email": { "type": "string", "format": "email" },
            "password": { "type": "string" }
          },
          "required": ["email", "password"]
        },
        "UserUpdate": {
          "type": "object",
          "properties": {
            "username": { "type": "string", "example": "alice42" },
            "email": { "type": "string", "format": "email" },
            "password": { "type": "string", "minLength": 6 , "example" : "password1!" }
          }
        
        },
        "MovieCreate": {
          "type": "object",
          "properties": {
            "title": { "type": "string", "example": "Inception" },
            "genre": { "type": "string", "example": "Sci-Fi" },
            "durationMin": { "type": "integer", "example": 148 },
            "synopsis": { "type": "string", "example": "A thief who steals corporate secrets through dream-sharing..." }
          },
          "required": ["title", "genre", "durationMin", "synopsis"]
        },
        "SeasonCreate": {
          "type": "object",
          "properties": {
            "seasonNo": { "type": "integer", "example": 1 },
            "episodes": { "type": "integer", "example": 12 },
            "serieId": { "type": "string", "example": "68efc5597e60108c63766ff9" }
          },
          "required": ["seasonNo", "episodes", "serieId"]
        },
        "SerieCreate": {
          "type": "object",
          "properties": {
            "title": { "type": "string", "example": "Serie cool" },
            "genre": { "type": "string", "example": "drama" },
            "status": { "type": "string", "example": "ended" }
          },
          "required": ["title", "genre", "status"]
        },
        "RatingCreate": {
          "type": "object",
          "properties": {
            "target": { "type": "string", "example": "episode" },
            "targetId": { "type": "string", "example": "68efcfdabb5e966085b05a45" },
            "score": { "type": "integer", "example": 8 },
            "review": { "type": "string", "example": "Trop bien" }
          },
          "required": ["target", "targetId", "score", "review"]
        },
        "EpisodeCreate": {
          "type": "object",
          "properties": {
            "seasonId": { "type": "string", "example": "68efc9ad1527b4772b528b19" },
            "epNo": { "type": "integer", "example": 1 },
            "title": { "type": "string", "example": "La guerre des thrones" },
            "durationMin": { "type": "integer", "example": 200 }
          },
          "required": ["seasonId", "epNo", "title", "duratioMin"]
        }
  
        
      }
      
    }
  }
  